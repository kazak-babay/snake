
html:
<body>
    
    <div class="field">

    </div>

    <template id="row-template">
        <div class="field__row"></div>
    </template>

    <template id="cell-template">
        <div class="field__cell"></div>
    </template>

</body>

js(отправляю класс app, он инициализируется в модульном скрипте)
class App {
    fieldValues = {
        FIELD_SIZE: 20,
        MODEL: [],
        DELAY: 150
    }

    cellState = {
        EMPTY_CELL: 0,
        SNAKE_CELL: 1,
        FOOD_CELL: 2
    }

    SNAKE = [
        { x: 2, y: 0 },
        { x: 1, y: 0 },
        { x: 0, y: 0 }
    ]

    snakeEnds = {
        head: this.SNAKE[0],
        tail: this.SNAKE[-1]
    }

    movementDirection = {
        current: 'right',
        up: 'up',
        right: 'right',
        down: 'down',
        left: 'left'
    }
    
    constructor() {
        this.createModel();
        this.putFoodToModel();
        this.displayField();
        // setInterval(this.update, this.fieldValues.DELAY);
        setTimeout(this.update, this.fieldValues.DELAY);
    }

    helpers = {
        getRandomCell(a, b) {
            return {
                x: Math.floor(Math.random() * (b - a + 1)) + a,
                y: Math.floor(Math.random() * (b - a + 1)) + a
            }
        }
    }

    createModel() {
        // пустая модель
        for (let y = 0; y < this.fieldValues.FIELD_SIZE; y++) {
            const row = [];
            for (let x = 0; x < this.fieldValues.FIELD_SIZE; x++) {
                row.push(this.cellState.EMPTY_CELL);
            }
            this.fieldValues.MODEL.push(row);
        }
        // Добавляем змею
        for (let i = 0; i < this.SNAKE.length; i++) {
            this.fieldValues.MODEL[this.SNAKE[i].y][this.SNAKE[i].x] = this.cellState.SNAKE_CELL;
        }
    }

    putFoodToModel() {
        // рандомная ячейка
        const cellObj = this.helpers.getRandomCell(0, this.fieldValues.FIELD_SIZE);
        // проверка на змею
        if (!this.SNAKE.some(obj => obj === cellObj)) {
            this.fieldValues.MODEL[cellObj.y][cellObj.x] = this.cellState.FOOD_CELL;
        } else {
            this.putFoodToModel();
        }
    }

    displayField() {
        const rowElement = document.getElementById('row-template');
        const cellElement = document.getElementById('cell-template');
        const rootElement = document.querySelector('.field');

        for (let y = 0; y < this.fieldValues.FIELD_SIZE; y++) {
            const row = rowElement.content.firstElementChild.cloneNode(false); // false ибо нету ничего внутри
            for (let x = 0; x < this.fieldValues.FIELD_SIZE; x++) {
                const cell = cellElement.content.firstElementChild.cloneNode(false);
                //координаты
                cell.dataset.x = x;
                cell.dataset.y = y;
                //классы для особенных ячеек
                if (this.fieldValues.MODEL[y][x] === this.cellState.FOOD_CELL) {
                    cell.classList.add('food');
                }
                if (this.fieldValues.MODEL[y][x] === this.cellState.SNAKE_CELL) {
                    cell.classList.add('snake-body');
                }
                row.append(cell);
            }
            rootElement.append(row);
        }
    }

    update() {
        console.log(this.snakeEnds);
        // координаты концов змеи
        const 
        snakeHeadX = this.snakeEnds.head.x, 
        snakeHeadY = this.snakeEnds.head.y,
        snakeTailX = this.snakeEnds.tail.x,
        snakeTailY = this.snakeEnds.tail.y;
    
        // двигаем змею
        switch (this.movementDirection.current) {
            case 'right':
                // проверяю следующую клетку на пустоту
                if (this.fieldValues.MODEL[snakeHeadY][snakeHeadX+1] === this.cellState.EMPTY_CELL) {
                     // если пустота, ставим змею
                     this.fieldValues.MODEL[snakeHeadY][snakeHeadX+1] = this.cellState.SNAKE_CELL;
                     // хвост убираем
                     this.fieldValues.MODEL[snakeTailY][snakeTailX] = this.cellState.EMPTY_CELL;
                } else if (0) { // проверяю на еду
                    // если еда, ставим змею, НО не убираем хвост
                    this.fieldValues.MODEL[snakeHeadY][snakeHeadX+1] = this.cellState.SNAKE_CELL;
                } else {
                    // если змея
                    this.looseActions();
                }
            case 'down':
            case 'left':
            case 'up':
        }
    }

    looseActions() {}
}

export default App;